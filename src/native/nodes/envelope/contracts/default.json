{
  "version": 1,
  "node": "EnvelopeModulatorNode",
  "description": "Tap contract for the ADSR envelope modulator exposing trigger/gate inputs and a two-lane envelope bus.",
  "tap_groups": [
    {
      "name": "envelope_inputs",
      "direction": "input",
      "unit_shape": {
        "batches": 1,
        "channels": 4,
        "frames": 256
      },
      "dtype": "f64",
      "buffer": {
        "prealloc_units": 1024,
        "layout": "row-major"
      },
      "delivery": {
        "mode": "fifo_pc",
        "full_percent_target": 100,
        "low_watermark_percent": 0,
        "multicast": {
          "ack_policy": "all",
          "quorum_k": 1
        },
        "fifo_pc": {
          "release_policy": "on_consume"
        }
      },
      "indexing": {
        "major_order": [
          "channel",
          "unit"
        ],
        "band_indexing": "absolute"
      },
      "channels": [
        {
          "name": "trigger",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "hold_if_absent": true,
          "optional_default": {
            "value": 0.0
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        },
        {
          "name": "gate",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "hold_if_absent": true,
          "optional_default": {
            "value": 0.0
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        },
        {
          "name": "drone",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "hold_if_absent": true,
          "optional_default": {
            "value": 0.0
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        },
        {
          "name": "velocity",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "hold_if_absent": true,
          "optional_default": {
            "value": 1.0
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        }
      ]
    },
    {
      "name": "envelope_bus",
      "direction": "output",
      "unit_shape": {
        "batches": 1,
        "channels": 2,
        "frames": 256
      },
      "dtype": "f64",
      "buffer": {
        "prealloc_units": 4096,
        "layout": "row-major"
      },
      "delivery": {
        "mode": "multicast",
        "full_percent_target": 85,
        "low_watermark_percent": 30,
        "multicast": {
          "ack_policy": "all",
          "quorum_k": 1
        },
        "fifo_pc": {
          "release_policy": "on_consume"
        }
      },
      "indexing": {
        "major_order": [
          "channel",
          "unit"
        ],
        "band_indexing": "absolute"
      },
      "channels": [
        {
          "name": "amplitude",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        },
        {
          "name": "reset",
          "enabled": true,
          "count": 1,
          "active_indices": [
            0
          ],
          "active_mask_b64": null,
          "unit_shape": {
            "batches": 1,
            "channels": 1,
            "frames": 256
          },
          "subchannels": [
            {
              "name": "value",
              "enabled": true,
              "stride_elems": 1
            }
          ]
        }
      ]
    }
  ]
}
